#!/bin/bash

PATH1="/data/GE_MCI/"
PATH2="/MNINonLinear/Results/HyperMEPI_PCASL_RS_PA_ASL/HyperMEPI_PCASL_RS_PA_ASL_hp2000_s6_level1.feat/HyperMEPI_PCASL_RS_PA_ASL_hp2000_s6_e1_ss.nii.gz"
PATH3="/data/GE_MCI/MCI_means/"

FILES=("MCI1001_050421"
       "MCI1002_042721"
       "MCI1003_042921"
       "MCI1005_052721"
       "MCI1006"
       "MCI1007"
       "MCI1008"
       "MCI1009_110621"
       "MCI1012_110521"
       "MC11013"
       "MCI1014_110421"
       "MCI1015_121521"
       "MCI1016_121621"
       "MCI1017"
       "MCI1018_112321"
       "MCI1019_120121"
       "MCI1020_112321"
       "MCI1021_122321"
       "MCI1022_010722"
       "MCI1023_011122"
       "MCI1025_012022"
       "MCI1026_042722"
       "MCI1027_030222"
       "MCI1028_030322"
       "MCI1029_050622"
       "MCI1031_052322"
       "MCI1032_032822"
       "MC11033_062822"
       "MCI1035_032222"
       "MCI1036_042122"
       "MCI1037_042122"
       "MCI1038_042722"
       "MCI1039_042622"
       "MCI2001_1_A"
       "MCI2002_011221"
       "MCI2003_011421"
       "MCI2004_011921"
       "MCI2005_052021"
       "MCI2006_070821"
       "MCI2007_121421"
       "MCI2008_020322"
       "MCI2010_032222"
       "MCI2011_040422"
       "MCI2012_041422"
       "MCI2013_052622"
       "MC1300_1_A"
       "MCI3002_031221"
       "MCI3003_073021"
       "MCI3004_110321"
       "MCI3005_110521"
       "MCI3006_111721"
       "MCI3007_112421"
       "MCI3008_041322"
       "MCI3009_051022"
       "MCI3010_051022"
       "MCI3011_051622"
       "MCI3012_052022"
       "MCI3013_052522"
       "MCI3014_071322"
       "MCI3015_072122")

for file in "${FILES[@]}"; do
    input_path="${PATH1}${file}${PATH2}"
    output_path="${PATH3}$(basename $file .nii.gz)_mean.nii.gz"

    fslmaths $input_path -Tmean $output_path
    
    echo "Processed: $file"
done

echo "All files processed!"


